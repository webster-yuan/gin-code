# 任务执行规范

## 概述

本文件总结了项目开发过程中的关键注意事项和规范要求，确保后续任务能够高效、一致地完成。

## 1. 文档生成与管理

### 1.1 API文档路径
- **正确路径**：Swagger文档（docs.go、swagger.json、swagger.yaml）必须生成在 `internal/docs/` 目录下
- **避免混淆**：禁止在 `docs/` 目录下生成自动文档，该目录仅用于手动编写的功能说明文档

### 1.2 文档生成命令
- 使用指定命令生成最新API文档：
  ```bash
  go run github.com/swaggo/swag/cmd/swag init -o internal/docs
  ```

### 1.3 功能说明文档
- **创建时机**：每个功能完成后必须创建对应的说明文档
- **存储位置**：文档必须放在 `docs/` 目录下
- **命名格式**：采用「功能名称+说明.md」格式（如：统一响应格式说明.md、认证授权功能说明.md）

## 2. 文档格式与内容

### 2.1 格式一致性
- 遵循项目现有文档的格式结构（概述、实现方案、API接口、使用示例等）
- 使用统一的标题层级、代码块格式和表格样式

### 2.2 跨平台支持
- 提供测试命令时，必须同时包含：
  - Linux/macOS版本（使用curl）
  - Windows版本（使用PowerShell的Invoke-WebRequest）

### 2.3 内容完整性
- 包含功能概述、技术栈、核心组件、实现流程
- 提供完整的代码示例和使用说明
- 明确说明安全特性和注意事项

## 3. 技术实现规范

### 3.1 Gin框架规范
- 严格遵循Gin框架的开发规范和最佳实践
- 使用标准的路由配置和中间件机制

### 3.2 中间件使用
- 认证授权等横切关注点必须通过中间件实现
- 中间件应保持单一职责，避免过度复杂

### 3.3 统一响应格式
- 所有API接口必须使用项目统一的响应格式
- 遵循 `response.Response` 结构体的定义

### 3.4 错误处理
- 使用项目的错误处理机制（`internal/errors`）
- 保持错误响应的一致性和可读性

### 3.5 依赖注入
- 重要组件（服务、仓库）应使用依赖注入方式管理
- 避免硬编码依赖关系

## 4. 安全考虑

### 4.1 密码存储
- 用户密码必须使用bcrypt等安全算法哈希后存储
- 禁止明文存储密码

### 4.2 JWT安全
- JWT令牌应包含合理的过期时间
- 密钥需妥善保管，避免泄露

### 4.3 认证机制
- 使用标准的认证流程（登录获取令牌，后续请求携带令牌）
- 验证令牌的完整性和有效性

## 5. 测试与验证

### 5.1 功能验证
- 完成功能后必须进行基本的API测试
- 验证核心功能的正确性

### 5.2 文档验证
- 生成的Swagger文档需验证其包含所有最新接口
- 检查文档的准确性和完整性

### 5.3 跨平台测试
- 确保测试命令在不同操作系统下都能正常工作
- 提供明确的测试步骤和预期结果

## 6. 任务完成标准

### 6.1 代码质量
- 代码符合项目的编程规范
- 无明显的语法错误和逻辑缺陷

### 6.2 文档完整
- API文档已更新到正确路径
- 功能说明文档已创建并包含所有必要信息

### 6.3 功能可用
- 实现的功能能够正常工作
- 与现有系统集成良好

## 7. 其他注意事项

- 关注系统性能和安全性
- 遵循项目的命名规范
- 保持代码的可读性和可维护性
- 及时解决出现的问题和错误

## 更新记录

- 2026-01-17：初始版本，包含API文档管理、功能说明文档、技术规范等内容